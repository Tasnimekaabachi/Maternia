{% extends 'base.html.twig' %}

{% block title %}Connexion - Maternia{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <style>
        /* 1. Consistent Flowing Background */
        .login-page-wrapper {
            background: linear-gradient(-45deg, #e0c3fc, #fbc2eb, #a1c4fd, #c2e9fb);
            background-size: 400% 400%;
            animation: flowingGradient 15s ease infinite;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        @keyframes flowingGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* 2. High-Contrast Card */
        .auth-card {
            background: #ffffff;
            border-radius: 40px;
            border: none;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.1);
            padding: 50px 40px;
            width: 100%;
            max-width: 450px;
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .auth-card:hover {
            transform: translateY(-10px);
        }

        /* 3. Hover Scaling for Textfields */
        .form-control {
            background-color: #f7fafc !important;
            border: 2px solid transparent !important;
            border-radius: 15px !important;
            padding: 15px 20px !important;
            color: #2d3748;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        }

        .form-control:hover, .form-control:focus {
            transform: scale(1.03);
            background-color: #ffffff !important;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05);
        }

        .form-control:focus {
            border-color: #f06292 !important;
            outline: none;
        }

        /* 4. Typography & Button */
        .welcome-title { color: #4a5568; font-weight: 700; font-size: 2rem; }
        .welcome-title span { color: #d53f8c; }
        
        .label-custom { 
            font-size: 0.8rem; 
            font-weight: 700; 
            color: #718096; 
            text-transform: uppercase; 
            margin-bottom: 8px; 
            display: block; 
        }

        .btn-login {
            background: linear-gradient(90deg, #ff6b8b 0%, #f06292 100%);
            border: none;
            border-radius: 20px;
            color: white;
            font-weight: 700;
            padding: 18px;
            text-transform: uppercase;
            box-shadow: 0 10px 20px rgba(255, 107, 139, 0.3);
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .btn-login:hover {
            transform: scale(1.05);
            filter: brightness(1.1);
            color: white;
        }

        /* Error Alert Styling */
        .alert-custom {
            background-color: #fff5f5;
            color: #c53030;
            border-radius: 12px;
            padding: 12px;
            font-size: 0.85rem;
            margin-bottom: 20px;
            border: 1px solid #feb2b2;
        }
    </style>
{% endblock %}

{% block body %}
<div class="login-page-wrapper">
    <div class="auth-card">
        <form method="post">
            <div class="text-center mb-5">
                <h2 class="welcome-title">Heureuse de vous <span>revoir !</span></h2>
                <p class="text-muted small">Connectez-vous à votre espace Maternia</p>
            </div>

            {% if error %}
                <div class="alert-custom text-center">{{ error.messageKey|trans(error.messageData, 'security') }}</div>
            {% endif %}

            {% if app.user %}
                <div class="mb-3 text-center">
                    Vous êtes connecté en tant que {{ app.user.userIdentifier }}, <a href="{{ path('app_logout') }}">Déconnexion</a>
                </div>
            {% endif %}

            <div class="mb-4">
                <label for="inputEmail" class="label-custom">Email</label>
                <input type="email" value="{{ last_username }}" name="email" id="inputEmail" class="form-control" autocomplete="email" required autofocus placeholder="maman@exemple.com">
            </div>

            <div class="mb-4">
                <label for="inputPassword" class="label-custom">Mot de passe</label>
                <input type="password" name="password" id="inputPassword" class="form-control" autocomplete="current-password" required placeholder="••••••••">
            </div>

            <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">

            <div class="form-check mb-4">
                <input type="checkbox" name="_remember_me" id="remember_me" class="form-check-input">
                <label class="form-check-label small text-muted" for="remember_me">Se souvenir de moi</label>
            </div>

            <button class="btn btn-login w-100" type="submit">
                Se connecter <i class="fas fa-sign-in-alt ms-2"></i>
            </button>

            <div class="text-center mt-4">
                <p class="small text-muted">Pas encore membre ? <a href="{{ path('app_register') }}" class="fw-bold text-decoration-none" style="color: #d53f8c;">Créer un compte</a></p>
            </div>
        </form>
    </div>
</div>
{% endblock %}