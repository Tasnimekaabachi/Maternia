{% if events is empty %}
    <div class="col-12 text-center py-5">
        <div style="width:90px;height:90px;background:#fce7f3;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 1.25rem;font-size:2rem;color:#ec4899;">
            <i class="fas fa-calendar-times"></i>
        </div>
        <p class="text-muted fw-semibold mb-0">Aucun événement à venir pour le moment.</p>
    </div>
{% else %}
    {% for event in events %}
        <div class="col-md-6 col-lg-6 col-xl-4 mb-4">
            <div class="pl-card">
                {# Image / Placeholder #}
                <div class="pl-card-img">
                    {% if event.image %}
                        <img src="{{ asset('img/events/' ~ event.image) }}" alt="{{ event.title }}">
                    {% else %}
                        <div class="pl-card-placeholder">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                    {% endif %}

                    {# Status badge #}
                    <div class="pl-status">
                        {% if event.isWeekly %}
                            <span class="pl-badge pl-badge-weekly"><i class="fas fa-redo me-1"></i>Hebdomadaire</span>
                        {% elseif not event.isWeekly and event.endAt and event.endAt < date() %}
                            <span class="pl-badge pl-badge-ended"><i class="fas fa-check-double me-1"></i>Terminé</span>
                        {% elseif not event.isWeekly and event.startAt and event.startAt <= date() and event.endAt >= date() %}
                            <span class="pl-badge pl-badge-ongoing"><i class="fas fa-play me-1"></i>En cours</span>
                        {% elseif not event.isWeekly and event.startAt and event.startAt > date() %}
                            <span class="pl-badge pl-badge-upcoming"><i class="fas fa-calendar-check me-1"></i>À venir</span>
                        {% endif %}
                    </div>
                </div>

                {# Content #}
                <div class="pl-card-body">
                    {# Meta row #}
                    <div class="pl-meta-row">
                        <span class="pl-meta">
                            <i class="fas fa-calendar-alt"></i>
                            {% if event.isWeekly %}
                                {{ event.dayOfWeek|replace({'Monday': 'Lun', 'Tuesday': 'Mar', 'Wednesday': 'Mer', 'Thursday': 'Jeu', 'Friday': 'Ven', 'Saturday': 'Sam', 'Sunday': 'Dim'}) }}
                            {% else %}
                                {{ event.startAt ? event.startAt|date('d/m') : 'TBD' }}
                            {% endif %}
                            ·
                            {% if event.isWeekly %}
                                {{ event.startTime ? event.startTime|date('H:i') : '' }}
                            {% else %}
                                {{ event.startAt ? event.startAt|date('H:i') : '' }}
                            {% endif %}
                        </span>
                        <span class="pl-meta">
                            <i class="fas fa-map-marker-alt"></i>
                            <span class="text-truncate" style="max-width:100px;" title="{{ event.location }}">{{ event.location|default('Sur place') }}</span>
                        </span>
                    </div>

                    {# Title #}
                    <h4 class="pl-title">
                        <a href="{{ path('app_event_user_show', {'id': event.id}) }}">{{ event.title }}</a>
                    </h4>

                    {# Description #}
                    <p class="pl-desc">{{ event.description|default('')|slice(0, 100) }}{% if event.description|default('')|length > 100 %}...{% endif %}</p>

                    {# Footer #}
                    <div class="pl-foot">
                        <span class="pl-cta-text">En savoir plus</span>
                        <a href="{{ path('app_event_user_show', {'id': event.id}) }}" class="pl-cta-btn">
                            <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    {% endfor %}
{% endif %}

<style>
    /* ═══════════════════════════
       MATERNIA PUBLIC LIST CARDS
       ═══════════════════════════ */
    .pl-card {
        background: white;
        border-radius: 18px;
        overflow: hidden;
        border: 1px solid #f1f5f9;
        box-shadow: 0 4px 20px -5px rgba(0,0,0,0.06);
        height: 100%;
        display: flex;
        flex-direction: column;
        transition: all 0.35s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .pl-card:hover {
        transform: translateY(-6px);
        box-shadow: 0 16px 40px -8px rgba(236, 72, 153, 0.18);
        border-color: rgba(236, 72, 153, 0.2);
    }

    /* Image */
    .pl-card-img {
        position: relative;
        height: 220px;
        overflow: hidden;
    }

    .pl-card-img img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s ease;
    }

    .pl-card:hover .pl-card-img img {
        transform: scale(1.06);
    }

    .pl-card-placeholder {
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #fce7f3 0%, #fdf2f8 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 3rem;
        color: #f9a8d4;
    }

    .pl-status {
        position: absolute;
        top: 0.85rem;
        left: 0.85rem;
    }

    .pl-badge {
        padding: 5px 12px;
        border-radius: 50px;
        font-size: 0.7rem;
        font-weight: 700;
        backdrop-filter: blur(8px);
        display: inline-flex;
        align-items: center;
    }

    .pl-badge-upcoming { background: rgba(16, 185, 129, 0.85); color: white; }
    .pl-badge-ongoing { background: rgba(245, 158, 11, 0.9); color: white; }
    .pl-badge-ended { background: rgba(107, 114, 128, 0.8); color: white; }
    .pl-badge-weekly { background: rgba(99, 102, 241, 0.85); color: white; }

    /* Body */
    .pl-card-body {
        padding: 1.25rem 1.5rem 1.5rem;
        display: flex;
        flex-direction: column;
        flex: 1;
    }

    .pl-meta-row {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-bottom: 0.75rem;
    }

    .pl-meta {
        display: flex;
        align-items: center;
        gap: 0.35rem;
        font-size: 0.78rem;
        font-weight: 600;
        color: #94a3b8;
    }

    .pl-meta i {
        color: #ec4899;
        font-size: 0.7rem;
    }

    .pl-title {
        font-size: 1.1rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
        line-height: 1.35;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .pl-title a {
        color: #1e293b;
        text-decoration: none;
        transition: color 0.2s;
    }

    .pl-title a:hover { color: #ec4899; }

    .pl-desc {
        color: #64748b;
        font-size: 0.88rem;
        line-height: 1.7;
        flex: 1;
        margin-bottom: 1rem;
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .pl-foot {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-top: 0.85rem;
        border-top: 1px solid #f1f5f9;
    }

    .pl-cta-text {
        font-size: 0.78rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1px;
        color: #ec4899;
    }

    .pl-cta-btn {
        width: 36px;
        height: 36px;
        background: linear-gradient(135deg, #ec4899, #be185d);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.8rem;
        transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        text-decoration: none;
        box-shadow: 0 4px 12px rgba(236, 72, 153, 0.3);
    }

    .pl-cta-btn:hover {
        transform: scale(1.15) rotate(-15deg);
        box-shadow: 0 6px 20px rgba(236, 72, 153, 0.4);
        color: white;
    }
</style>
